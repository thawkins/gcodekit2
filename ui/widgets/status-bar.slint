//! Status Bar Widget - Application status display bar
//!
//! Displays machine status, position, version, device connection status,
//! and current theme indicator.

import { ThemedText } from "../theme/mod.slint";
import { ThemeProvider } from "../theme/mod.slint";

/// Application status bar showing system information
export component StatusBar inherits Rectangle {
    background: ThemeProvider.colors.panel;
    height: 37.5px;
    
    in property <string> status: "Idle";
    in property <string> position: "X: 0.00 Y: 0.00 Z: 0.00";
    in property <string> version: "GRBL v1.1h";
    in property <bool> is-connected: false;
    in property <string> connection-status: "Disconnected";
    
    HorizontalLayout {
        padding-left: 7px;
        padding-right: 7px;
        padding-top: 5px;
        padding-bottom: 5px;
        spacing: 14px;
        alignment: center;
        
        // Connection status indicator
        HorizontalLayout {
            spacing: 5px;
            
            Rectangle {
                width: 14px;
                height: 14px;
                background: transparent;
                
                Rectangle {
                    width: 10px;
                    height: 10px;
                    border-radius: 5px;
                    background: root.is-connected ? ThemeProvider.colors.status-green : ThemeProvider.colors.status-red;
                    y: 4px;
                    x: 2px;
                }
            }
            
            ThemedText {
                text: "Device: " + root.connection-status;
                font-size: 17px;
                font-weight: 700;
            }
        }
        
        ThemedText {
            text: "Status: " + root.status;
            font-size: 17px;
        }
        
        ThemedText {
            text: "Position: " + root.position;
            font-size: 17px;
        }
        
        ThemedText {
            text: "Version: " + root.version;
            font-size: 17px;
        }
        
        Rectangle {
            width: 100%;
        }
        
        // Theme indicator
        HorizontalLayout {
            spacing: 4px;
            
            ThemedText {
                text: "Theme:";
                font-size: 16px;
            }
            
            ThemedText {
                text: ThemeProvider.mode == "light" ? "â˜€ Light" : "ðŸŒ™ Dark";
                color: ThemeProvider.mode == "light" ? ThemeProvider.colors.status-yellow : #7B68EE;
                font-size: 16px;
                font-weight: 700;
            }
        }
    }
}
